```{r include=FALSE}
require(DCF)
options(na.rm=TRUE)
```
## Body Shape and Diabetes

### YOUR NAME HERE

Read the body-shape dataset, from a study called "NHANES":
```{r}
data(nhanes)
```
You can use `help(nhanes)` to see the meaning of each variable.

### Techniques

#### Creating a new variable.  

Use `transform`.  For example, a rough indicator of body shape is waist circumference (`wgt`) divided by height (`hgt`).  Suppose you decide to call this "stoutness":
```{r}
nhanes = transform(nhanes, 
                   stoutness=wst/hgt)
```

#### Work with a small subset of the data

You are going to be exploring different possibilities.  It's nice to be able to do this as quickly as possible.  There are so many cases in `nhanes` that the graphics take several seconds to generate.  Things will be faster if you work with a subset of the data.  
```{r}
smallnhanes = sample(nhanes, size=1000)
```

In your plotting commands, you can write everything in terms of `smallnhanes` and then change back to the full data set as appropriate.

Make sure to put the command to make the sample **after** any statements in which you make new variables.  That way, the new variables will appear in both `nhanes` and `smallnhanes`.

#### Making Scatterplots

Use `mScatter` to make some graphs interactively.  Then paste the command generated by `mScatter` into an R-chunk in this document.  That way, the graphic will be generated automatically. 

You can copy the command and change the names of variables to generate a new graph, without having to go back to the interactive graph.

```{r fig.height=4,fig.width=6}
ggplot(data=smallnhanes)+geom_point(aes(x=bmi,y=stoutness))+aes(colour=sex)+aes(size=age) 
```

Comments: Women and men seem to have about the same relationship between "stoutness" and body-mass index.  But kids seem to have a different relationship than adults.

Maybe it would be more effective to make the shape reflect sex and the color reflect age.  

```{r fig.height=4,fig.width=6}
ggplot(data=smallnhanes)+geom_point(aes(x=bmi,y=stoutness))+aes(colour=age)+aes(shape=as.factor(sex)) 
```


### Lots of Data

Using some transparency makes it possible to show all the data, but it's not clear that this is informative.

```{r fig.height=4,fig.width=6}
ggplot(data=nhanes)+geom_point(aes(x=bmi,y=stoutness),alpha=.1)+aes(colour=sex)+aes(size=age) 
```

----------------

Compiled on `r I(date())`